# 大量情報量への対応機能ガイド

## 概要

本番環境では、長大な調査レポートなど大量の情報を元にスライドを作成する必要があります。
このドキュメントでは、情報量が多い場合でもGeminiが混乱せず、高品質なスライドを生成できる2つの新機能を説明します。

## 新機能

### 1. スライド枚数の自動推奨機能

情報量（文字数、箇条書き項目数、セクション数）から、適切なスライド枚数を自動的に算出して推奨します。

#### 仕組み

- **文字数ベース**: 500文字未満→3枚、500-1500文字→5枚、1500-3000文字→8枚...
- **箇条書き項目数**: 15項目以上の場合、1スライド3項目として必要枚数を計算
- **セクション数**: セクション見出し（`##`や`**...**`）の数に応じて調整

#### 使い方

1. 詳細情報を入力すると、自動的に推奨スライド枚数が表示されます
2. 推奨値はそのまま使用することも、手動で調整することも可能です
3. 推奨範囲（最小〜最大）も表示されます

#### 例

```
詳細情報: 3000文字、箇条書き20項目、セクション7個

→ 推奨: 10枚
   理由: 7個のセクションがあるため、10枚を推奨します
   推奨範囲: 8〜13枚
```

### 2. 段階的生成モード

情報量が多い場合、一度にすべてのスライドを生成しようとするとGeminiが混乱します。
段階的生成モードでは、プロンプトを**複数のステップ**に分割して、段階的にスライドを作成します。

#### 仕組み

**ステップ1: 骨子（アウトライン）生成**
- まず全体の構成（各スライドのタイトルと主要ポイント）だけを生成
- 実際のスライドコンテンツは作成しない
- Geminiが全体像を把握できる

**ステップ2以降: 詳細生成（3-4枚ずつ）**
- 骨子を参照しながら、各スライドの詳細コンテンツを生成
- スライドを3-4枚ずつのグループに分割して生成
- 各ステップで集中して高品質なコンテンツを作成

#### 使い方

1. 入力フォームで「**段階的生成モードを使用**」をチェック
2. プロンプトを生成すると、複数のステップに分かれたプロンプトが表示されます
3. ステップ1から順番にGeminiに貼り付けて実行していきます

#### ステップの例（10枚のスライドの場合）

```
ステップ1: 骨子生成
→ 10枚すべてのタイトルと主要ポイントを生成

ステップ2: 詳細生成（スライド1-3）
→ スライド1〜3の詳細コンテンツを生成

ステップ3: 詳細生成（スライド4-6）
→ スライド4〜6の詳細コンテンツを生成

ステップ4: 詳細生成（スライド7-9）
→ スライド7〜9の詳細コンテンツを生成

ステップ5: 詳細生成（スライド10）
→ スライド10の詳細コンテンツを生成
```

## 実践ガイド：大量情報の処理

### ケース1: 中程度の情報量（1500-3000文字）

**推奨アプローチ: スライド枚数調整のみ**

1. 詳細情報を入力
2. 推奨スライド枚数（8枚程度）を確認
3. 段階的生成モードは**使用しない**
4. 一括でプロンプトを生成し、Geminiに貼り付け

**理由**: この程度の情報量なら、一度に処理しても問題ない

### ケース2: 大量の情報（3000-5000文字）

**推奨アプローチ: スライド枚数調整 + 段階的生成**

1. 詳細情報を入力
2. 推奨スライド枚数（10-12枚）を確認
3. **「段階的生成モードを使用」をチェック**
4. ステップ1で骨子を生成し、内容を確認
5. ステップ2以降で各スライドの詳細を順次生成

**理由**: 情報量が多いため、一度に処理するとGeminiが混乱する可能性が高い

### ケース3: 非常に大量の情報（5000文字以上）

**推奨アプローチ: 情報の要約 + 段階的生成**

1. **詳細情報を要点のみに絞る**（箇条書き形式が効果的）
2. スライド枚数を12枚以上に設定
3. **「段階的生成モードを使用」を必ずチェック**
4. ステップごとに丁寧に生成

**または**:
1. 詳細情報を2-3のテーマに分割
2. 各テーマごとにプロンプトを生成
3. 複数回に分けてスライドを作成

**理由**: 5000文字を超えると、プロンプト自体が長すぎてGeminiが仕様説明と誤解する可能性がある

## UI操作ガイド

### スライド枚数の設定

```
[スライド枚数]
┌─────────────────┐
│  [8]  枚       │
└─────────────────┘

💡 推奨: 8枚
情報量が多いため、8枚を推奨します
推奨範囲: 6〜11枚
```

- 数値フィールドで直接編集可能（3-20枚）
- 空欄の場合は推奨値が自動適用されます

### 段階的生成モードの設定

```
☑ 段階的生成モードを使用

情報量が多い場合におすすめ。最初に骨子を生成し、
その後各スライドの詳細を段階的に作成します。
Geminiが混乱せず、高品質なスライドを生成できます。

📝 使い方:
1. ステップ1のプロンプトで骨子を生成
2. 生成された骨子を確認
3. ステップ2以降のプロンプトで各スライドの詳細を生成
```

### プロンプト表示画面（段階的生成モード時）

```
[プロンプト生成完了]
📊 スライド枚数: 10枚
💡 推奨枚数: 10枚
🔄 段階的生成モード: 4ステップ

[タブ選択]
[📝 ステップ1: 骨子生成] [✏️ ステップ2: 詳細生成] ...

ステップ1: まず骨子（アウトライン）を生成します。
Geminiに貼り付けて、各スライドのタイトルと主要ポイントを確認してください。

[プロンプト表示エリア]

[このプロンプトをコピー] [全プロンプトをコピー]
```

## ベストプラクティス

### ✅ 推奨される使い方

1. **詳細情報は箇条書きで整理**
   ```
   **1. エグゼクティブサマリー**
   - 目標：AIによる自動スライド生成
   - 現状：単一ツールでは困難
   - 解決策：ツール組み合わせ

   **2. 課題**
   - AIの創造性 vs 企業の準拠性
   - 装飾的準拠は容易、構造的準拠が困難
   ```

2. **セクション見出しを活用**
   - `##` や `**...**` でセクションを明確化
   - 自動推奨ロジックがセクション数を検出して最適な枚数を提案

3. **情報量に応じたモード選択**
   - 3000文字未満: 一括生成でOK
   - 3000-5000文字: 段階的生成を推奨
   - 5000文字以上: 情報を要約 or 分割

### ❌ 避けるべき使い方

1. **長大な文章をそのまま貼り付け**
   - Geminiが混乱して仕様説明を出力する可能性が高い
   - 要点を箇条書きで整理してから入力

2. **推奨枚数を大幅に無視**
   - 推奨8枚なのに3枚に強制すると、情報が詰め込まれすぎる
   - 推奨範囲（6-11枚）内で調整するのがベスト

3. **段階的生成でステップ1をスキップ**
   - ステップ1の骨子生成は必須
   - いきなりステップ2から始めると、全体像が不明で失敗する

## トラブルシューティング

### Q1: 推奨枚数が多すぎる（15枚以上）

**A**: 詳細情報の内容を見直してください

- 箇条書き項目が多すぎないか確認
- 重複する内容をまとめる
- 本当に必要な情報だけに絞る

または、複数回に分けて生成することを検討してください。

### Q2: 段階的生成でステップ2以降がうまくいかない

**A**: ステップ1の骨子を確認してください

- 骨子がGeminiによって正しく生成されているか
- 各スライドのタイトルと主要ポイントが明確か
- 必要に応じて、ステップ1で生成した骨子を手動で調整

### Q3: それでもGeminiが仕様説明を出力してしまう

**A**: 以下を試してください

1. 詳細情報を現在の半分の文字数に削減
2. 段階的生成モードを使用
3. プロンプトの末尾に以下を追加（手動編集）:
   ```
   **今すぐスライドコンテンツを作成してください。
   仕様説明ではなく、実際のスライドを出力してください。**
   ```

## まとめ

- **スライド枚数自動推奨**: 情報量に応じた最適な枚数を提案
- **段階的生成モード**: 大量情報でも混乱せず高品質に生成
- **3000文字が分岐点**: それ以上なら段階的生成を推奨
- **箇条書き化が重要**: 長文より整理された箇条書きが効果的

これらの機能を活用することで、本番の大量情報でも安定してスライドを生成できます。
